#!/usr/bin/env bash

##############################################
#   Author: Roy Conn
#   Project: update
#   Version: 1.0
#
#   Usage: update
#
#   Description: Update all software on your
#	linux PC.
##############################################

# shellcheck disable=SC1091
source "${SCRIPTS}"/00-api.sh

####################################

DISABLE_ROOT

UPDATER() {
	req="${1}"
	cmd="${2}"

	if CMD_EXISTS "${req}"; then

		clear

		read -rp "Update \"${req}\"? (Y/n) " confirmation

		if CHECK_YES "${confirmation}"; then

			PRINT "Updating ${req}...\n"
			eval "${cmd}"

		else

			PRINT "Skipped updating ${req}...\n"

		fi

		PAUSE

	fi
}

UPDATER "flatpak" "flatpak update"
UPDATER "snap" "sudo snap refresh"
UPDATER "brew" "brew upgrade"
UPDATER "apt" "sudo apt update && sudo apt upgrade"
UPDATER "dnf" "sudo dnf update"
UPDATER "pacman" "sudo pacman -Syu --noconfirm"
UPDATER "yay" "yay -Sua --noconfirm"
UPDATER "paru" "paru -Sua --noconfirm"

clear
PRINT "Updates finished."
PAUSE
clear
